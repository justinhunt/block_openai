{"version":3,"file":"ajaxhelper.min.js","sources":["../src/ajaxhelper.js"],"sourcesContent":["/**\n * a helper to manage ajax openai calls\n *\n * @module     block_openai/ajaxhelper\n * @class      ajaxhelper\n * @package    block_openai\n * @copyright  2023 Justin Hunt <poodllsupport@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/log','core/ajax'],\n    function($, log, Ajax) {\n\n        \"use strict\"; // jshint ;_;\n\n        log.debug('ajax helper: initialising');\n\n        return {\n            //pass in config, the jquery video/audio object, and a function to be called when conversion has finshed\n            init: function (props) {\n                this.registerEvents();\n\n            },\n\n            registerEvents: function(){\n                //$('.writemodelanswer').on('click',function() {\n                $('.btn.btn-secondary.ml-0').on('click',function() {\nlog.debug('clicked')\n                    var unitindex = $(this).data('unitindex');\n                    var prompt = $('#id_prompts_' + unitindex + '  option:selected').text();\n                    var topic = $('input[name=\"dquestionid[' + unitindex + ']\"]:checked').parent().text();\n                    var topicresponse = $('#id_solomodelanswer_' + unitindex);\n                    //push results to server\n                    Ajax.call([{\n                        methodname: 'block_openai_fetch_completion',\n                        args: {\n                            completiontask: 'basicchat',\n                            taskparam1: prompt,\n                            taskparam2: topic,\n                            taskparam3: 'empty',\n                            taskparam4: 'empty',\n                        }\n                        }])[0].then(function(resp){\n                            topicresponse.text(resp);\n                            //write value of ret to text area\n                            log.debug(resp);\n                        }\n                    );\n\n\n                });\n            }\n\n        };//end of return value\n    });"],"names":["define","$","log","Ajax","debug","init","props","registerEvents","on","unitindex","this","data","prompt","text","topic","parent","topicresponse","call","methodname","args","completiontask","taskparam1","taskparam2","taskparam3","taskparam4","then","resp"],"mappings":";;;;;;;;;AASAA,iCAAO,CAAC,SAAU,WAAW,cACzB,SAASC,EAAGC,IAAKC,aAIbD,IAAIE,MAAM,6BAEH,CAEHC,KAAM,SAAUC,YACPC,kBAITA,eAAgB,WAEZN,EAAE,2BAA2BO,GAAG,SAAQ,WACxDN,IAAIE,MAAM,eACcK,UAAYR,EAAES,MAAMC,KAAK,aACzBC,OAASX,EAAE,eAAiBQ,UAAY,qBAAqBI,OAC7DC,MAAQb,EAAE,2BAA6BQ,UAAY,eAAeM,SAASF,OAC3EG,cAAgBf,EAAE,uBAAyBQ,WAE/CN,KAAKc,KAAK,CAAC,CACPC,WAAY,gCACZC,KAAM,CACFC,eAAgB,YAChBC,WAAYT,OACZU,WAAYR,MACZS,WAAY,QACZC,WAAY,YAEZ,GAAGC,MAAK,SAASC,MACjBV,cAAcH,KAAKa,MAEnBxB,IAAIE,MAAMsB"}